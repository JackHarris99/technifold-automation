table_name,constraint_name,constraint_type,check_clause,columns
companies,companies_category_check,CHECK,"CHECK (category = ANY (ARRAY['customer'::text, 'prospect'::text, 'supplier'::text, 'press'::text, 'partner'::text, 'internal'::text, 'distributor'::text, 'dealer'::text]))",null
companies,companies_status_check,CHECK,"CHECK (status = ANY (ARRAY['active'::text, 'inactive'::text, 'dead'::text]))",null
companies,companies_type_check,CHECK,"CHECK (type = ANY (ARRAY['customer'::text, 'prospect'::text, 'distributor'::text]))",null
company_machine,company_machine_company_machine_unique,UNIQUE,null,"company_id, machine_id"
company_product_catalog,company_product_catalog_company_id_product_code_key,UNIQUE,null,"company_id, product_code"
contact_interactions,contact_interactions_interaction_type_check,CHECK,"CHECK (interaction_type = ANY (ARRAY['portal_view'::text, 'portal_cart_add'::text, 'portal_purchase'::text, 'email_sent'::text, 'email_opened'::text, 'email_clicked'::text, 'marketing_page_view'::text, 'form_submit'::text, 'machine_selected'::text, 'quote_requested'::text, 'quote_sent'::text, 'quote_accepted'::text, 'phone_call'::text, 'trade_show_meeting'::text, 'demo_requested'::text]))",null
contacts,contacts_marketing_status_check,CHECK,"CHECK (marketing_status = ANY (ARRAY['subscribed'::text, 'unsubscribed'::text, 'pending'::text]))",null
contacts,contacts_status_check,CHECK,"CHECK (status = ANY (ARRAY['active'::text, 'former'::text, 'unknown'::text]))",null
contacts,email_or_phone_chk,CHECK,CHECK (email IS NOT NULL OR phone IS NOT NULL),null
contacts,uq_contacts_company_email_exact,UNIQUE,null,"company_id, email"
customer_pricing_overrides,must_specify_product_or_category,CHECK,CHECK (product_code IS NOT NULL OR category IS NOT NULL),null
distributor_pricing,distributor_pricing_product_code_key,UNIQUE,null,product_code
invoices,invoices_invoice_number_key,UNIQUE,null,invoice_number
invoices,invoices_stripe_invoice_id_key,UNIQUE,null,stripe_invoice_id
machines,machines_slug_key,UNIQUE,null,slug
order_items,order_items_qty_check,CHECK,CHECK (qty <> 0),null
orders,orders_fulfillment_status_check,CHECK,"CHECK (fulfillment_status = ANY (ARRAY['new'::text, 'hold_unpaid'::text, 'ready_to_pick'::text, 'shipped'::text, 'cancelled'::text]))",null
orders,orders_invoice_status_check,CHECK,"CHECK (invoice_status = ANY (ARRAY['draft'::text, 'open'::text, 'sent'::text, 'paid'::text, 'void'::text, 'uncollectible'::text]))",null
orders,orders_order_type_check,CHECK,"CHECK (order_type = ANY (ARRAY['consumables_reorder'::text, 'tool_purchase'::text, 'tool_rental_setup'::text, 'tool_rental_payment'::text]))",null
orders,orders_payment_channel_check,CHECK,"CHECK (payment_channel = ANY (ARRAY['stripe'::text, 'invoice'::text]))",null
orders,orders_payment_status_check,CHECK,"CHECK (payment_status = ANY (ARRAY['unpaid'::text, 'paid'::text, 'failed'::text, 'refunded'::text]))",null
outbox,outbox_status_check,CHECK,"CHECK (status = ANY (ARRAY['pending'::text, 'processing'::text, 'completed'::text, 'failed'::text]))",null
premium_pricing_ladder,valid_qty_range_premium,CHECK,CHECK (min_qty <= max_qty),null
premium_pricing_ladder,unique_qty_range_premium,UNIQUE,null,"min_qty, max_qty"
products,products_type_check,CHECK,"CHECK (type = ANY (ARRAY['tool'::text, 'consumable'::text, 'machine'::text, 'part'::text]))",null
quote_requests,quote_requests_source_check,CHECK,"CHECK (source::text = ANY (ARRAY['manual'::character varying, 'automated'::character varying, 'website_form'::character varying, 'phone_call'::character varying, 'marketing_link'::character varying]::text[]))",null
quote_requests,quote_requests_status_check,CHECK,"CHECK (status::text = ANY (ARRAY['requested'::character varying, 'quote_sent'::character varying, 'won'::character varying, 'lost'::character varying, 'too_soon'::character varying, 'not_ready'::character varying, 'too_expensive'::character varying]::text[]))",null
rental_agreements,rental_agreements_status_check,CHECK,"CHECK (status = ANY (ARRAY['trial'::text, 'active'::text, 'past_due'::text, 'cancelled'::text, 'completed'::text, 'defaulted'::text]))",null
rental_agreements,rental_agreements_serial_number_key,UNIQUE,null,serial_number
rental_agreements,rental_agreements_stripe_subscription_id_key,UNIQUE,null,stripe_subscription_id
shipping_rates,shipping_rates_rate_gbp_check,CHECK,CHECK (rate_gbp >= 0::numeric),null
shipping_rates,shipping_rates_country_code_key,UNIQUE,null,country_code
standard_pricing_ladder,valid_qty_range,CHECK,CHECK (min_qty <= max_qty),null
standard_pricing_ladder,unique_qty_range,UNIQUE,null,"min_qty, max_qty"
subscriptions,subscriptions_stripe_subscription_id_key,UNIQUE,null,stripe_subscription_id
trial_intents,trial_intents_token_key,UNIQUE,null,token
users,users_role_check,CHECK,"CHECK (role = ANY (ARRAY['director'::text, 'sales_rep'::text]))",null
users,users_email_key,UNIQUE,null,email
